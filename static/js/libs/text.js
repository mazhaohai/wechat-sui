define(["module"],function(M){var H,D,J,C,A,B=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],N=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,F=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,K=typeof location!=="undefined"&&location.href,L=K&&location.protocol&&location.protocol.replace(/\:/,""),G=K&&location.hostname,I=K&&(location.port||undefined),O={},E=(M.config&&M.config())||{};H={version:"2.0.14",strip:function(Q){if(Q){Q=Q.replace(N,"");var P=Q.match(F);if(P){Q=P[1]}}else{Q=""}return Q},jsEscape:function(P){return P.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:E.createXhr||function(){var S,P,R;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else{if(typeof ActiveXObject!=="undefined"){for(P=0;P<3;P+=1){R=B[P];try{S=new ActiveXObject(R)}catch(Q){}if(S){B=[R];break}}}}return S},parseName:function(S){var T,P,V,R=false,Q=S.lastIndexOf("."),U=S.indexOf("./")===0||S.indexOf("../")===0;if(Q!==-1&&(!U||Q>1)){T=S.substring(0,Q);P=S.substring(Q+1)}else{T=S}V=P||T;Q=V.indexOf("!");if(Q!==-1){R=V.substring(Q+1)==="strip";V=V.substring(0,Q);if(P){P=V}else{T=V}}return{moduleName:T,ext:P,strip:R}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(W,P,U,S){var T,R,V,Q=H.xdRegExp.exec(W);if(!Q){return true}T=Q[2];R=Q[3];R=R.split(":");V=R[1];R=R[0];return(!T||T===P)&&(!R||R.toLowerCase()===U.toLowerCase())&&((!V&&!R)||V===S)},finishLoad:function(Q,S,R,P){R=S?H.strip(R):R;if(E.isBuild){O[Q]=R}P(R)},load:function(R,S,T,Q){if(Q&&Q.isBuild&&!Q.inlineText){T();return}E.isBuild=Q&&Q.isBuild;var V=H.parseName(R),U=V.moduleName+(V.ext?"."+V.ext:""),W=S.toUrl(U),P=(E.useXhr)||H.useXhr;if(W.indexOf("empty:")===0){T();return}if(!K||P(W,L,G,I)){H.get(W,function(X){H.finishLoad(R,V.strip,X,T)},function(X){if(T.error){T.error(X)}})}else{S([U],function(X){H.finishLoad(V.moduleName+"."+V.ext,V.strip,X,T)})}},write:function(T,P,S,R){if(O.hasOwnProperty(P)){var Q=H.jsEscape(O[P]);S.asModule(T+"!"+P,"define(function () { return '"+Q+"';});\n")}},writeFile:function(W,S,R,Q,P){var V=H.parseName(S),U=V.ext?"."+V.ext:"",X=V.moduleName+U,T=R.toUrl(V.moduleName+U)+".js";H.load(X,R,function(Z){var Y=function(a){return Q(T,a)};Y.asModule=function(a,b){return Q.asModule(a,T,b)};H.write(W,X,Y,P)},P)}};if(E.env==="node"||(!E.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])){D=require.nodeRequire("fs");H.get=function(Q,P,T){try{var S=D.readFileSync(Q,"utf8");if(S[0]==="\uFEFF"){S=S.substring(1)}P(S)}catch(R){if(T){T(R)}}}}else{if(E.env==="xhr"||(!E.env&&H.createXhr())){H.get=function(Q,P,U,R){var T=H.createXhr(),S;T.open("GET",Q,true);if(R){for(S in R){if(R.hasOwnProperty(S)){T.setRequestHeader(S.toLowerCase(),R[S])}}}if(E.onXhr){E.onXhr(T,Q)}T.onreadystatechange=function(V){var W,X;if(T.readyState===4){W=T.status||0;if(W>399&&W<600){X=new Error(Q+" HTTP status: "+W);X.xhr=T;if(U){U(X)}}else{P(T.responseText)}if(E.onXhrComplete){E.onXhrComplete(T,Q)}}};T.send(null)}}else{if(E.env==="rhino"||(!E.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")){H.get=function(V,Q){var W,P,R="utf-8",U=new java.io.File(V),S=java.lang.System.getProperty("line.separator"),T=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(U),R)),X="";try{W=new java.lang.StringBuffer();P=T.readLine();if(P&&P.length()&&P.charAt(0)===65279){P=P.substring(1)}if(P!==null){W.append(P)}while((P=T.readLine())!==null){W.append(S);W.append(P)}X=String(W.toString())}finally{T.close()}Q(X)}}else{if(E.env==="xpconnect"||(!E.env&&typeof Components!=="undefined"&&Components.classes&&Components.interfaces)){J=Components.classes;C=Components.interfaces;Components.utils["import"]("resource://gre/modules/FileUtils.jsm");A=("@mozilla.org/windows-registry-key;1" in J);H.get=function(Q,P){var V,U,T,R={};if(A){Q=Q.replace(/\//g,"\\")}T=new FileUtils.File(Q);try{V=J["@mozilla.org/network/file-input-stream;1"].createInstance(C.nsIFileInputStream);V.init(T,1,0,false);U=J["@mozilla.org/intl/converter-input-stream;1"].createInstance(C.nsIConverterInputStream);U.init(V,"utf-8",V.available(),C.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);U.readString(V.available(),R);U.close();V.close();P(R.value)}catch(S){throw new Error((T&&T.path||"")+": "+S)}}}}}}return H});